{{- partial "analytics" . -}}
<meta charset="utf-8">

{{/* ─── Title ─── */}}
<title>{{- if .IsHome -}}{{ site.Title }} — Официальный сайт{{- else -}}{{ .Title }} | {{ site.Title }}{{- end -}}</title>

{{/* ─── Meta base ─── */}}
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<meta name="robots" content="index, follow">

{{/* ─── Meta description ─── */}}
{{- $desc := "" -}}
{{- if .Description -}}
  {{- $desc = .Description -}}
{{- else if .IsHome -}}
  {{- $desc = site.Params.homepage_meta_tags.meta_description -}}
{{- else if .Summary -}}
  {{- $desc = .Summary | truncate 160 -}}
{{- end -}}
{{- if $desc -}}
<meta name="description" content="{{ $desc }}">
{{- end -}}

{{/* ─── Canonical URL ─── */}}
<link rel="canonical" href="{{ .Permalink }}">

{{/* ─── Open Graph ─── */}}
{{- $ogTitle := .Title -}}
{{- $ogDesc := $desc -}}
{{- $ogURL := .Permalink -}}
{{- $ogType := "article" -}}
{{- $ogImage := "" -}}
{{- if .IsHome -}}
  {{- $ogTitle = site.Params.homepage_meta_tags.meta_og_title | default site.Title -}}
  {{- $ogType = "website" -}}
  {{- $ogImage = site.Params.homepage_meta_tags.meta_og_image -}}
{{- else if .Params.image -}}
  {{- $ogImage = .Params.image | absURL -}}
{{- else -}}
  {{- $ogImage = site.Params.homepage_meta_tags.meta_og_image -}}
{{- end -}}

<meta property="og:type" content="{{ $ogType }}">
<meta property="og:site_name" content="{{ site.Params.site.name | default site.Title }}">
<meta property="og:title" content="{{ $ogTitle }}">
{{- if $ogDesc }}
<meta property="og:description" content="{{ $ogDesc }}">
{{- end }}
<meta property="og:url" content="{{ $ogURL }}">
{{- if $ogImage }}
<meta property="og:image" content="{{ $ogImage }}">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">
{{- end }}
<meta property="og:locale" content="ru_RU">

{{/* ─── Twitter / VK Card ─── */}}
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="{{ $ogTitle }}">
{{- if $ogDesc }}
<meta name="twitter:description" content="{{ $ogDesc }}">
{{- end }}
{{- if $ogImage }}
<meta name="twitter:image" content="{{ $ogImage }}">
{{- end }}

{{/* ─── Yandex Webmaster verification ─── */}}
<meta name="yandex-verification" content="78032920">

{{/* ─── Yandex Metrika ─── */}}
<script type="text/javascript">
(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
m[i].l=1*new Date();
for(var j=0;j<document.scripts.length;j++){if(document.scripts[j].src===r){return;}}
k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)
})(window,document,'script','https://mc.yandex.ru/metrika/tag.js','ym');
ym(78032920,'init',{clickmap:true,referrer:document.referrer,url:location.href,accurateTrackBounce:true,trackLinks:true});
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/78032920" style="position:absolute;left:-9999px;" alt=""/></div></noscript>

{{/* ─── JSON-LD structured data ─── */}}

{{/* WebSite schema — на всех страницах, даёт поисковикам понять структуру сайта */}}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebSite",
  "name": "Роман Мелдерс — официальный сайт",
  "url": "{{ site.BaseURL }}",
  "description": "Официальный сайт российского актёра Романа Мелдерса",
  "inLanguage": "ru",
  "author": {
    "@type": "Person",
    "name": "Роман Мелдерс"
  }
}
</script>

{{- if .IsHome }}
{{/* Person schema — расширенный, для AI-выдачи и Knowledge Panel */}}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Person",
  "name": "Роман Мелдерс",
  "alternateName": ["Roman Melders", "Р. Мелдерс"],
  "url": "https://www.melders.ru",
  "image": "{{ site.Params.homepage_meta_tags.meta_og_image }}",
  "jobTitle": "Актёр",
  "description": "Роман Мелдерс — российский актёр кино, телевидения и дубляжа. Родился 6 сентября 2012 года в Санкт-Петербурге. Снялся в более чем 25 проектах.",
  "birthDate": "2012-09-06",
  "birthPlace": {
    "@type": "Place",
    "name": "Санкт-Петербург, Россия"
  },
  "nationality": {
    "@type": "Country",
    "name": "Россия"
  },
  "knowsAbout": ["актёрское мастерство", "кино", "дубляж", "сериалы"],
  "hasOccupation": {
    "@type": "Occupation",
    "name": "Актёр",
    "occupationLocation": {
      "@type": "City",
      "name": "Санкт-Петербург"
    }
  },
  "contactPoint": {
    "@type": "ContactPoint",
    "contactType": "Представитель",
    "name": "Ирина Мелдерс",
    "telephone": "+7-911-777-41-42",
    "email": "roman@melders.ru"
  },
  "sameAs": [
    "https://www.kinopoisk.ru/name/6624997/",
    "https://www.kino-teatr.ru/kino/acter/c/ros/560649/works/",
    "https://kinolift.ru/16742",
    "https://casting.filmtoolz.ru/3318251/",
    "https://vk.ru/romanmelders",
    "https://vk.com/romanmelders",
    "https://www.instagram.com/roman.melders",
    "https://t.me/MeldersR"
  ]
}
</script>
{{- else if eq .Section "post" }}
{{/* CreativeWork schema для постов о фильмах/сериалах — точнее чем Article */}}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "CreativeWork",
  "name": {{ .Title | jsonify }},
  "description": {{ $desc | jsonify }},
  "datePublished": "{{ .Date.Format "2006-01-02" }}",
  "dateModified": "{{ .Lastmod.Format "2006-01-02" }}",
  "url": "{{ .Permalink }}",
  {{- if $ogImage }}
  "image": "{{ $ogImage }}",
  {{- end }}
  "author": {
    "@type": "Person",
    "name": "Роман Мелдерс",
    "url": "https://www.melders.ru"
  },
  "about": {
    "@type": "Person",
    "name": "Роман Мелдерс",
    "url": "https://www.melders.ru"
  },
  "inLanguage": "ru",
  "countryOfOrigin": {
    "@type": "Country",
    "name": "Россия"
  }
}
</script>
{{- end }}

{{/* BreadcrumbList — для не-главных страниц */}}
{{- if not .IsHome }}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Главная",
      "item": "https://www.melders.ru/"
    }
    {{- if eq .Section "post" -}}
    ,{
      "@type": "ListItem",
      "position": 2,
      "name": "Фильмография",
      "item": "https://www.melders.ru/post/"
    },{
      "@type": "ListItem",
      "position": 3,
      "name": {{ .Title | jsonify }},
      "item": "{{ .Permalink }}"
    }
    {{- else -}}
    ,{
      "@type": "ListItem",
      "position": 2,
      "name": {{ .Title | jsonify }},
      "item": "{{ .Permalink }}"
    }
    {{- end }}
  ]
}
</script>
{{- end }}

{{/* ─── Fonts & Icons ─── */}}
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preload" as="style" onload="this.onload=null;this.rel='stylesheet'"
  href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&family=Open+Sans:wght@400;600&display=swap">
<noscript><link rel="stylesheet"
  href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&family=Open+Sans:wght@400;600&display=swap"></noscript>

{{/* ─── Favicons ─── */}}
<link rel="icon" type="image/png" href="{{ "favicon-64x64.png" | relURL }}" sizes="96x96" />
<link rel="icon" type="image/svg+xml" href="{{ "favicon.svg" | relURL }}" />
<link rel="shortcut icon" href="{{ "favicon.ico" | relURL }}" />
<link rel="apple-touch-icon" sizes="180x180" href="{{ "apple-touch-icon.png" | relURL }}" />
<meta name="apple-mobile-web-app-title" content="{{ site.Title }}" />
<link rel="manifest" href="{{ "site.webmanifest" | relURL }}" />

{{ if .Site.Params.icon.fontawesome }}
<link href='{{ "/css/fa7.min.css" | relURL }}' rel="stylesheet" type="text/css">
{{ end }}
{{ if .Site.Params.icon.bootstrap }}
<link href='{{ "/css/bootstrap-icons.min.css" | relURL }}' rel="stylesheet" type="text/css">
{{ end }}

{{/* ─── Stylesheets ─── */}}
<link rel="stylesheet" href='{{ "/css/tella.css" | relURL }}'>
{{ if .IsHome }}
<link rel="stylesheet" href='{{ "/css/splide.min.css" | relURL }}'>
{{ end }}
<link rel="stylesheet" href='{{ "/css/custom.css" | relURL }}'>
